{% extends 'base.html' %}
{% block content %}
{% include 'navbar.html' %}
<div class="max-w-7xl mx-auto px-6 py-8">
  <h1 class="text-4xl font-bold text-[#005C67] mb-6 text-center">Explore Our Basketball Collection</h1>
  <p class="text-center text-gray-600 mb-8">Temukan perlengkapan basket dari merek-merek terbaik: <b>Nike</b>, <b>Adidas</b>, <b>Spalding</b>, <b>Wilson</b>, dan <b>TARMAK</b>.</p>

  <!-- Filter Form -->
  <form method="get" class="flex flex-wrap justify-center gap-3 mb-10">
    <input type="text" name="q" placeholder="Cari produk..." value="{{ request.GET.q }}" class="border rounded-lg p-2 w-48">
    <select name="category" class="border rounded-lg p-2">
      <option value="">Semua Kategori</option>
      <option value="Shoes">Sepatu</option>
      <option value="Jersey">Jersey</option>
      <option value="Ball">Bola</option>
      <option value="Hoop">Ring</option>
      <option value="Accessories">Aksesoris</option>
    </select>
    <input type="text" name="brand" placeholder="Merek" value="{{ request.GET.brand }}" class="border rounded-lg p-2 w-40">
    <input type="number" name="min_price" placeholder="Harga Min" class="border rounded-lg p-2 w-32">
    <input type="number" name="max_price" placeholder="Harga Max" class="border rounded-lg p-2 w-32">
    <button type="submit" class="bg-[#005C67] text-white rounded-lg px-4 py-2 hover:bg-[#007681]">Cari</button>
  </form>

  <!-- Product Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    {% for p in products %}
    <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition p-4 flex flex-col">
      {% if p.image %}
        <img src="{{ p.image.url }}" alt="{{ p.name }}" class="h-56 w-full object-cover rounded-md mb-3">
      {% else %}
        <img src="https://via.placeholder.com/300x200?text=No+Image" class="h-56 w-full object-cover rounded-md mb-3">
      {% endif %}
      <h3 class="text-xl font-semibold text-[#005C67]">{{ p.name }}</h3>
      <p class="text-gray-600">{{ p.brand }} • {{ p.category }}</p>
      <p class="text-[#F5A623] font-bold mt-1 mb-2">Rp {{ p.price }}</p>
      <p class="text-sm text-gray-500 mb-3">{{ p.description|truncatechars:100 }}</p>
      <p class="text-sm text-gray-700 mb-1">⭐ {{ p.rating }}/5</p>
      <p class="text-sm mb-3 {{ p.is_available|yesno:'text-green-600,text-red-600' }}">
        {% if p.is_available %}Tersedia{% else %}Stok Habis{% endif %}
      </p>
      <p class="text-xs text-gray-400 mb-4">Dirilis: {{ p.release_date }}</p>

      <div class="mt-auto flex justify-between">
        <a href="{% url 'catalog:product_update' p.pk %}" class="bg-[#005C67] text-white rounded-lg px-3 py-1 hover:bg-[#007681]">Edit</a>
        <a href="{% url 'catalog:product_delete' p.pk %}" class="bg-red-600 text-white rounded-lg px-3 py-1 hover:bg-red-700">Hapus</a>
      </div>
    </div>
    {% empty %}
    <p class="text-center text-gray-500 col-span-3">Tidak ada produk ditemukan.</p>
    {% endfor %}
  </div>

  <div class="text-center mt-10">
    <a href="{% url 'catalog:product_create' %}" class="bg-[#F5A623] text-white font-semibold rounded-lg px-6 py-3 hover:bg-[#e5961f]">+ Tambah Produk</a>
  </div>
</div>
{% endblock %}
