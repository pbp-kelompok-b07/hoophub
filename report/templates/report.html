{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>hoophub - Reports</title>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}
<main>
    {% if user.is_authenticated %}
    <div class="px-[40px]">
        <h2 style="padding: 0px 50px 0px 50px; font-weight: 700; color: #000; font-size:20px">Track your reports!</h2>
        <hr style="border: none; border-top: 2px dashed #005F73; margin: 10px 50px 30px 50px;">
        <div id="reportContainer">
            {% if report_list %}
                {% for report in report_list %}
                    <div 
                        id="report-{{ report.id }}"
                        onclick="window.location.href='{% url 'report:report_detail' report.id %}'" 
                        style="background-color: #E0E0E0; border-radius: 16px; padding: 20px 30px; margin: 0 auto 20px auto; width: 95%; height: 200px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;"
                        onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)';"
                        onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';"
                    >
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3 style="font-weight: 700;">{{ report.title }}</h3>
                                <p style="color: #4A4A4A;">{{ report.description|truncatewords:20 }}</p>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <a href="#" 
                                    onclick="event.stopPropagation(); showEditReportModal('{{ report.id }}', '{{ report.title }}', '{{ report.description }}')"
                                    style="background-color: #EE9B00; color: white; padding: 5px 15px; border-radius: 99px; font-weight: 500; text-decoration: none; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                                    Edit
                                </a>
                                <a href="#" 
                                    onclick="event.stopPropagation(); showDeleteReportModal('{{ report.id }}')"
                                    style="background-color: #bb3e03; color: white; padding: 5px 15px; border-radius: 99px; font-weight: 500; text-decoration: none; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                                    Delete
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p style="padding: 0px 50px;color: #666;">You havenâ€™t submitted any reports yet.</p>
            {% endif %}
        </div>
    </div>
    {% else %} 
    <div class="flex flex-col justify-center items-center h-[60vh] text-center px-4">
        <h1 class="text-2xl font-bold text-gray-700 mb-2">You must be logged in.</h1>
        <p class="text-gray-500 mb-2 max-w-md">
            To see your report or write a new one, please log in to your account.
        </p>
        <a href="{% url 'authentication:login' %}"
        class="bg-[#EE9B00] text-white py-3 px-5 rounded-full mt-1 hover:bg-[#CA6702] transition duration-300">
            Login
        </a>
    </div>
    {% endif %}
</main> 
{% endblock content %}